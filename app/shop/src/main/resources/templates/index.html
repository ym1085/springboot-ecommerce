<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/basic">

    <th:block layout:fragment="title">
        <title>쇼핑몰</title>
    </th:block>

    <th:block layout:fragment="content">
        <div class="page_tits">
            <h3>상품 목록</h3>
        </div>
        <div class="content">
            <!-- 상품 이미지 / 상품명 / 상품 설명 / 상품 가격 출력 -->
            <section>
                <table border="1">
                    <thead>
                        <tr>
                            <th scope="col">상품 이미지</th>
                            <th scope="col">상품명</th>
                            <th scope="col">상품 설명</th>
                            <th scope="col">상품 가격</th>
                        </tr>
                    </thead>
                    <tbody id="list">
                        <tr th:if="${products.data != null and not #lists.isEmpty(products.data)}" th:each="product : ${products.data}">
                            <!--<td><img th:src="@{${product.imageUrl}}" alt="상품 이미지" style="width:100px; height:auto;"/></td>-->
                            <td th:text="${product.productName}"></td>
                            <td th:text="${product.productDesc}"></td>
                            <td th:text="${product.productPrice}"></td>
                        </tr>
                        <tr th:if="${products.data == null or #lists.isEmpty(products.data)}">
                            <td colspan="4">상품이 없습니다.</td>
                        </tr>
                    </tbody>
                </table>

                <div class="paging">
                    <p>
                        <!-- 첫, 이전 페이지 -->
                        <a th:if="${products.pagination != null and not #strings.isEmpty(products.pagination.existsPrevPage) and products.pagination.existsPrevPage == true}"
                           href="javascript:void(0);" th:attr="onclick='movePageWithPageNo(' + ${1} +')'" class="page_bt first">첫 페이지</a>
                        <a th:if="${products.pagination != null and not #strings.isEmpty(products.pagination.existsPrevPage) and products.pagination.existsPrevPage == true}"
                           href="javascript:void(0);" th:attr="onclick='movePageWithPageNo(' + ${products.pagination.startPage - 1} +')'" class="page_bt prev">이전 페이지</a>

                        <!-- 1, 2, 3, 4.. -->
                        <th:block th:if="${products.pagination != null and not #strings.isEmpty(products.pagination.getStartPage())}">
                        <span th:each="i : ${#numbers.sequence(products.pagination.startPage, products.pagination.endPage)}">
                            <!--<a th:if="${i != searchRequestDto.pageNo}" href="javascript:void(0);" onclick="movePageWithPageNo(i)" th:text="${i}"></a>-->
                            <a th:if="${i != searchRequestDto.pageNo}" href="javascript:void(0);" th:attr="onclick='movePageWithPageNo(' + ${i} + ')'" th:text="${i}"></a>
                            <span th:if="${i == searchRequestDto.pageNo}" th:text="${i}" class="on"></span>
                        </span>
                        </th:block>

                        <!-- 다음, 마지막 페이지 -->
                        <a th:if="${products.pagination != null and not #strings.isEmpty(products.pagination.existsNextPage) and products.pagination.existsNextPage == true}"
                           href="javascript:void(0);" th:attr="onclick='movePageWithPageNo(' + ${products.pagination.endPage + 1} + ')'" class="page_bt next">다음 페이지</a>
                        <a th:if="${products.pagination != null and not #strings.isEmpty(products.pagination.existsNextPage) and products.pagination.existsNextPage == true}"
                           href="javascript:void(0);" th:attr="onclick='movePageWithPageNo(' + ${products.pagination.totalPageCount} + ')'" class="page_bt last">마지막 페이지</a>
                    </p>
                </div>

                <!--/* 게시글 저장 페이징 이동 버튼 */-->
                <!--<p class="btn_set tr">
                    <a th:href="@{/post/}" class="btns btn_st3 btn_mid">글쓰기</a>
                </p>-->
                <br>
                <div class="search_box">
                    <form id="searchForm" onsubmit="return false;" autocomplete="off">
                        <div class="sch_group fl">
                            <select id="searchType" name="searchType" title="검색 유형 선택">
                                <option value="">전체 검색</option>
                                <option value="title">제목</option>
                                <option value="content">내용</option>
                                <option value="writer">작성자</option>
                            </select>
                            <input type="text" id="searchKeyword" name="searchKeyword" placeholder="키워드를 입력해 주세요." title="키워드 입력" />
                            <!--
                                검색 처리에서는 현재 페이지가 항상 1로 유지 되어야 한다
                                - ex) 예시
                                - A가 작성한 게시글 20 개 존재
                                - B가 3페이지에서 게시글을 보다가 A 가 작성한 글을 보기 위해 "작성자"를 A로 검색
                                - A가 작성한 글을 보았으나, A의 게시글 검색이 안됨
                            -->
                            <button type="button" class="bt_search" onclick="movePageWithPageNo(1);"><i class="fas fa-search"></i><span class="skip_info">검색</span></button>
                        </div>
                    </form>
                </div>
            </section>
        </div>
    </th:block>

    <th:block layout:fragment="script">
        <!-- /* <script th:src="@{/js/index/xxx.js}"></script> */-->
    </th:block>
</html>
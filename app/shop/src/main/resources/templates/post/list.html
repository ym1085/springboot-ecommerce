<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8">
<title>게시판 리스트 화면 테스트</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="/js/common/common.js"></script>
<script src="/js/common/message.js"></script>
<script th:inline="javascript">
    function movePageWithPageNo(pageNo) {
        const queryString = {
            pageNo: (pageNo) ? pageNo : 1,
            recordSizePerPage: 10,
            pageSize: 10
        }
        location.href = location.pathname + '?' + new URLSearchParams(queryString).toString();
    }
</script>
</head>
<div class="page_tits">
    <h3>게시판 관리</h3>
    <p class="path"><strong>현재 위치 :</strong> <span>게시판 관리</span> <span>리스트형</span> <span>리스트</span></p>
</div>

<div class="content">
    <section>
        <!--/* 검색 */-->
        <div class="search_box">
            <form id="searchForm" onsubmit="return false;" autocomplete="off">
                <div class="sch_group fl">
                    <select title="검색 유형 선택">
                        <option value="">전체 검색</option>
                        <option value="">제목</option>
                        <option value="">내용</option>
                    </select>
                    <input type="text" placeholder="키워드를 입력해 주세요." title="키워드 입력"/>
                    <button type="button" class="bt_search"><i class="fas fa-search"></i><span class="skip_info">검색</span></button>
                </div>
            </form>
        </div>

        <table class="tb tb_col">
            <colgroup>
                <col style="width:50px;"/>
                <col style="width:7.5%;"/>
                <col style="width:auto;"/>
                <col style="width:10%;"/>
                <col style="width:15%;"/>
                <col style="width:7.5%;"/>
                <col style="width:7.5%;"/>
            </colgroup>
            <thead>
                <tr>
                    <th scope="col"><input type="checkbox"/></th>
                    <th scope="col">번호</th>
                    <th scope="col">제목</th>
                    <th scope="col">내용</th>
                    <th scope="col">작성자</th>
                    <th scope="col">파일 첨부 여부</th>
                    <th scope="col">등록일</th>
                    <th scope="col">조회수</th>
                </tr>
            </thead>
            <tbody id="list">
                <tr th:if="${posts.data != null and not #lists.isEmpty(posts.data)}" th:each="post, postStat : ${posts.data}">
                    <td><input type="checkbox" /></td>
                    <td th:text="${post.fixedYn != 'N' ? '고정글' : '일반'}"></td>
                    <td><a th:href="@{'/post/' + ${post.postId}}" th:text="${post.title}"></a></td>
                    <td><a th:href="@{'/post/' + ${post.postId}}" th:text="${post.content}"></a></td>
                    <td th:text="${post.writer != null} ? ${post.writer} : ${'비고'}"></td>
                    <th:block th:if="${post.fileAttached != null and post.fileAttached != 'N'}" >
                        <i class="fas fa-file"></i>
                        <td th:text="${post.storedFileName}"></td> <!-- TODO: 원본 파일명으로 수정 -->
                    </th:block>
                    <th:block th:if="${post.fileAttached == null or post.fileAttached == 'N'}">
                        <i class="fas fa-file"></i>
                        <td th:text="${post.storedFileName}"></td>
                    </th:block>
                    <td th:text="${#temporals.format(post.createDate, 'yyyy-MM-dd')}"></td>
                    <td th:text="${post.readCnt}"></td>
                </tr>
            </tbody>
        </table>

        <div class="paging">
            <p>
                <a th:if="${posts.pagination.existsPrevPage == true}" href="javascript:void(0);"
                   th:attr="onclick='movePageWithPageNo(' + ${1} +')'" class="page_bt first">첫 페이지</a>
                <a th:if="${posts.pagination.existsPrevPage == true}" href="javascript:void(0);"
                   th:attr="onclick='movePageWithPageNo(' + ${posts.pagination.startPage - 1} +')'" class="page_bt prev">이전 페이지</a>
                <span th:each="i : ${#numbers.sequence(posts.pagination.startPage, posts.pagination.endPage)}">
                    <!--<a th:if="${i != searchRequestDto.pageNo}" href="javascript:void(0);" onclick="movePageWithPageNo(i)" th:text="${i}"></a>-->
                    <a th:if="${i != searchRequestDto.pageNo}" href="javascript:void(0);" th:attr="onclick='movePageWithPageNo(' + ${i} + ')'" th:text="${i}"></a>
                    <span th:if="${i == searchRequestDto.pageNo}" th:text="${i}" class="on"></span>
                </span>
                <a th:if="${posts.pagination.existsNextPage == true}" href="javascript:void(0);"
                   th:attr="onclick='movePageWithPageNo(' + ${posts.pagination.endPage + 1} + ')'" class="page_bt next">다음 페이지</a>
                <a th:if="${posts.pagination.existsNextPage == true}" href="javascript:void(0);"
                   th:attr="onclick='movePageWithPageNo(' + ${posts.pagination.totalPageCount} + ')'" class="page_bt last">마지막 페이지</a>
            </p>
        </div>

        <!--/* 게시글 저장 페이징 이동 버튼 */-->
        <!--<p class="btn_set tr">
            <a th:href="@{/post/}" class="btns btn_st3 btn_mid">글쓰기</a>
        </p>-->
    </section>
</div>
</html>